(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(e,t,a){},154:function(e,t,a){},156:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),i=a(6),r=a.n(i),s=(a(84),a(34)),l=a(35),c=a(37),m=a(36),d=a(38),g=a(57),u=a.n(g),h=a(13),p=a.n(h),v=a(78),f=a(59),w=a.n(f),b=(a(150),a(152),50),E={content:{top:"0",left:"0",right:"auto",bottom:"auto",marginRight:"0",transform:"translate(-50%, -50%)"}};function N(e){return{width:p()(e).width(),height:p()(e).height()}}var y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this))).onUpload=function(e){var t=document.querySelector("input[type=file]").files[0],n=new FileReader;a.setState({sliderValue:b}),t&&("image/jpeg"!==t.type&&"image/png"!==t.type&&"image/gif"!==t.type||n.readAsDataURL(t),n.onloadend=function(){var e=new Image;e.src=n.result,e.onload=function(a){var n=document.createElement("canvas"),o=e.width,i=e.height;o>i?o>1024&&(i*=1024/o,o=1024):i>1024&&(o*=1024/i,i=1024),function(e,t){var a=new FileReader;a.onload=function(e){var a=new DataView(e.target.result);if(65496!==a.getUint16(0,!1))return t(-2);for(var n=a.byteLength,o=2;o<n;){var i=a.getUint16(o,!1);if(o+=2,65505===i){if(1165519206!==a.getUint32(o+=2,!1))return t(-1);var r=18761===a.getUint16(o+=6,!1);o+=a.getUint32(o+4,r);var s=a.getUint16(o,r);o+=2;for(var l=0;l<s;l++)if(274===a.getUint16(o+12*l,r))return t(a.getUint16(o+12*l+8,r))}else{if(65280!==(65280&i))break;o+=a.getUint16(o,!1)}}return t(-1)},a.readAsArrayBuffer(e)}(t,function(t){var a=o,r=i,s=0;6===t?(console.log("rotate 90degree"),s=90):3===t?(console.log("rotate 180degree"),s=180):8===t&&(console.log("rotate 180degree"),s=270);var l=function(e,t,a){var n=a*Math.PI/180,o=Math.cos(n),i=Math.sin(n);return i<0&&(i=-i),o<0&&(o=-o),[t*i+e*o,t*o+e*i]}(a,r,s);n.width=l[0],n.height=l[1];var c=n.getContext("2d");c.clearRect(0,0,n.width,n.height),c.save(),c.translate(n.width/2,n.height/2),c.rotate(s*Math.PI/180),c.drawImage(e,-a/2,-r/2,a,r),c.restore();var m=n.toDataURL("image/jpeg");document.getElementById("user-img").setAttribute("src",m)})}})},a.onImgLoad=function(e){a.setState({draggablePostion:{x:(N(".drag-area").width-N(".user-img").width)/2,y:(N(".drag-area").height-N(".user-img").height)/2+20},userImgSize:{w:N(".user-img").width,h:N(".user-img").height}})},a.onModalImgLoad=function(e){a.setState({modalDraggablePostion:{x:(N(".drag-area-modal").width-N(".user-img-modal").width)/2,y:(N(".drag-area-modal").height-N(".user-img-modal").height)/2+20},modalUserImgSize:{w:N(".user-img-modal").width,h:N(".user-img-modal").height}})},a.onResize=function(e){var t=a.state.userImgSize;p()(".user-img").css("maxWidth",t.w+t.w*(e-50)/100+"px"),p()(".user-img").css("maxHeight",t.h+t.h*(e-50)/100+"px"),a.setState({sliderValue:e})},a.onModalResize=function(e){var t=a.state.modalUserImgSize;p()(".user-img-modal").css("maxWidth",t.w+t.w*(e-50)/100+"px"),p()(".user-img-modal").css("maxHeight",t.h+t.h*(e-50)/100+"px")},a.onStart=function(){var e=a.state.activeDrags;a.setState({activeDrags:e+1,draggablePostion:null,modalDraggablePostion:null})},a.onStop=function(){var e=a.state.activeDrags;a.setState({activeDrags:e-1})},a.download=function(){var e=p()(".cover-img"),t=p()(".user-img"),a=new Image;a.src=e.attr("src");var n=new Image;n.src=t.attr("src");var o=document.getElementById("result");o.width=3*e.width(),o.height=3*e.height();var i=o.getContext("2d");i.rect(0,0,3*e.width(),3*e.height()),i.fillStyle="#CCCCCC",i.fill(),i.drawImage(n,3*t.offset().left-3*e.offset().left,3*t.offset().top-3*e.offset().top,3*t.width(),3*t.height()),i.drawImage(a,0,0,3*e.width(),3*e.height());var r=o.toDataURL("image/png"),s=document.createElement("a");s.href=r,s.setAttribute("download","wuo.png"),console.log("download:",r),document.body.appendChild(s),s.click()},a.closeModal=function(){a.setState({modalIsOpen:!1})},a.openModal=function(){a.setState({modalIsOpen:!0})},a.state={activeDrags:0,sliderValue:b,draggablePostion:{x:0,y:100},userImgSize:{w:0,h:0},modalDraggablePostion:{x:0,y:100},modalUserImgSize:{w:0,h:0},modalIsOpen:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){w.a.setAppElement("body")}},{key:"render",value:function(){var e={onStart:this.onStart,onStop:this.onStop},t=this.state,a=t.draggablePostion,n=t.modalIsOpen,i=t.sliderValue;return o.a.createElement("div",{className:"cover-editor"},o.a.createElement("div",{className:"upload"},o.a.createElement("label",null,o.a.createElement("div",{className:"upload-button"},"\u4e0a\u50b3\u7167\u7247"),o.a.createElement("input",{type:"file",id:"getval",onChange:this.onUpload}))),o.a.createElement("div",{className:"cover-box"},o.a.createElement("img",{className:"cover-img",draggable:"false",src:"".concat("./assets/","object/1.png"),alt:"img"}),o.a.createElement("div",{className:"drag-area"},o.a.createElement(u.a,Object.assign({bounds:"parent",handle:".user-img",position:a},e),o.a.createElement("div",{className:"user-img-wrapper"},o.a.createElement("img",{id:"user-img",className:"user-img",draggable:"false",src:"".concat("./assets/","wuo_sample.png"),alt:"img",onLoad:this.onImgLoad}))))),o.a.createElement("div",{className:"slider"},o.a.createElement(v.a,{min:0,max:100,defaultValue:50,value:i,onChange:this.onResize}),o.a.createElement("div",{className:"slider-minus"},"-"),o.a.createElement("div",{className:"slider-plus"},"+")),o.a.createElement("div",{className:"actions"},o.a.createElement("div",{className:"visit"},o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://wuo-wuo.com/nest-holding-newspaper/each-period-of-nest-reported/800-wo-bao-bao-vol-14-quot-cat-is-hungry-quot-cat-diet-special-issue.html",className:"visit-button"})),o.a.createElement("div",{className:"download"},o.a.createElement("div",{className:"download-button",onClick:this.download}))),o.a.createElement(w.a,{isOpen:n,onAfterOpen:null,onRequestClose:this.closeModal,style:E,contentLabel:"Example Modal"},o.a.createElement("div",{className:"cover-box-modal"},o.a.createElement("img",{className:"cover-img-modal",draggable:"false",src:"".concat("./assets/","object/2.png"),alt:"img"}),o.a.createElement("div",{className:"drag-area-modal"},o.a.createElement(u.a,Object.assign({bounds:"parent",handle:".user-img-modal",position:a},e),o.a.createElement("div",{className:"user-img-wrapper-modal"},o.a.createElement("img",{id:"user-img-modal",className:"user-img-modal",draggable:"false",src:"".concat("./assets/","wuo_sample.png"),alt:"img",onLoad:this.onModalImgLoad})))))))}}]),t}(n.Component),I=(a(154),function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"app"},o.a.createElement("canvas",{id:"result",className:"hide"}),o.a.createElement("div",{hidden:!0,className:"app-logo"}),o.a.createElement("div",{className:"app-title"},o.a.createElement("img",{src:"./assets/complete-title.png",className:"app-main-title"}),o.a.createElement("img",{hidden:!0,src:"./assets/title.png",className:"app-main-title"}),o.a.createElement("img",{hidden:!0,src:"./assets/sub-title.png",className:"app-sub-title"})),o.a.createElement(y,null))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},79:function(e,t,a){e.exports=a(156)},84:function(e,t,a){}},[[79,2,1]]]);
//# sourceMappingURL=main.af3fed64.chunk.js.map