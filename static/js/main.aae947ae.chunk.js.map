{"version":3,"sources":["CoverEditorComponent.js","App.js","serviceWorker.js","index.js"],"names":["imgPath","process","defaultSliderValue","getImgSize","element","width","$","height","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onUpload","e","ReactGA","event","category","action","file","document","querySelector","files","resizeReader","FileReader","setState","sliderValue","readAsDataURL","onloadend","image","Image","src","result","onload","imageEvent","canvas","createElement","callback","reader","view","DataView","target","getUint16","length","byteLength","offset","marker","getUint32","little","tags","i","readAsArrayBuffer","getOrientation","orientation","oriWidth","oriHeight","degrees","console","log","newSize","w","h","rotation","rads","Math","PI","c","cos","s","sin","newCanvasSize","ctx","getContext","clearRect","save","translate","rotate","drawImage","restore","imgDataUrl","toDataURL","getElementById","setAttribute","onImgLoad","coverSize","coverWidth","coverHeight","coverRatio","imageSize","imageWidth","imageHeight","imageRatio","draggableX","draggableY","css","draggablePostion","x","y","userImgSize","onResize","number","state","onStart","activeDrags","onStop","download","coverImg","userImg","coverImage","attr","userImage","resize_canvas","rect","fillStyle","fill","left","top","link","toBlob","blob","href","URL","createObjectURL","body","appendChild","click","onTouchMove","preventDefault","Modal","setAppElement","addEventListener","removeEventListener","dragHandlers","_this$state","react_default","a","className","type","id","accept","onChange","draggable","concat","alt","react_draggable_default","assign","bounds","handle","position","onLoad","es","min","max","defaultValue","value","rel","onClick","Component","hidden","src_CoverEditorComponent","Boolean","window","location","hostname","match","initialize","pageview","pathname","search","ReactDOM","render","src_App_0","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.aae947ae.chunk.js","sourcesContent":["import React, { Component }     from 'react';\nimport Draggable                from 'react-draggable';\nimport $                        from 'jquery';\nimport Slider                   from 'rc-slider';\nimport Modal                    from 'react-modal';\nimport ReactGA                  from 'react-ga';\n\nimport 'rc-slider/assets/index.css';\nimport './CoverEditorComponent.css';\n\nconst imgPath = process.env.PUBLIC_URL + '/images/';\nconst defaultSliderValue = 50\n\nfunction newCanvasSize(w, h, rotation) {\n    let rads = rotation * Math.PI / 180;\n    let c = Math.cos(rads);\n    let s = Math.sin(rads);\n    if (s < 0) {\n        s = -s;\n    }\n    if (c < 0) {\n        c = -c;\n    }\n    return [h * s + w * c,h * c + w * s];\n}\n\nfunction getOrientation(file, callback) {\n  let reader = new FileReader();\n  reader.onload = function(e) {\n\n    let view = new DataView(e.target.result);\n    if (view.getUint16(0, false) !== 0xFFD8) return callback(-2);\n    let length = view.byteLength, offset = 2;\n    while (offset < length) {\n      let marker = view.getUint16(offset, false);\n      offset += 2;\n      if (marker === 0xFFE1) {\n        if (view.getUint32(offset += 2, false) !== 0x45786966) return callback(-1);\n        let little = view.getUint16(offset += 6, false) === 0x4949;\n        offset += view.getUint32(offset + 4, little);\n        let tags = view.getUint16(offset, little);\n        offset += 2;\n        for (let i = 0; i < tags; i++)\n          if (view.getUint16(offset + (i * 12), little) === 0x0112)\n            return callback(view.getUint16(offset + (i * 12) + 8, little));\n      }\n      else if ((marker & 0xFF00) !== 0xFF00) break;\n      else offset += view.getUint16(offset, false);\n    }\n    return callback(-1);\n  };\n  reader.readAsArrayBuffer(file);\n}\n\nfunction getImgSize(element) {\n  return {\n    width: $(element).width(),\n    height: $(element).height(),\n  }\n}\n\nclass App extends Component {\n\n  constructor(props) {\n    super();\n    this.state = {\n      activeDrags: 0,\n      sliderValue: defaultSliderValue,\n      draggablePostion: {\n        x: 0, y: 100\n      },\n      userImgSize: {\n        w: 0, h: 0\n      },\n    }\n  }\n\n  onUpload = (e) => {\n\n    ReactGA.event({\n      category: 'User',\n      action: 'Upload'\n    });\n\n    let file          = document.querySelector('input[type=file]').files[0];\n    let resizeReader  = new FileReader();\n\n    this.setState({ sliderValue: defaultSliderValue })\n\n    if (!file) {\n      return\n    //} else if (!(file.type === 'image/jpeg' || file.type === 'image/png' || file.type === 'image/gif')) {\n      // alert\n    } else {\n      resizeReader.readAsDataURL(file);\n    }\n\n    resizeReader.onloadend = function () {\n        let image = new Image();\n\n        image.src = resizeReader.result;\n        image.onload = function (imageEvent) {\n\n            /* Resize */\n            let canvas = document.createElement('canvas'),\n                max_size = 512*512,\n                width = image.width,\n                height = image.height;\n            // if (width > height) {\n            //     if (width > max_size) {\n            //         height *= max_size / width;\n            //         width = max_size;\n            //     }\n            // } else {\n            //     if (height > max_size) {\n            //         width *= max_size / height;\n            //         height = max_size;\n            //     }\n            // }\n\n            /* set new orientation */\n            getOrientation(file, (orientation) => {\n\n              let oriWidth = width\n              let oriHeight = height\n              let degrees = 0;\n              if (orientation === 6) {\n                console.log('rotate 90degree');\n                degrees = 90;\n              } else if (orientation === 3) {\n                console.log('rotate 180degree');\n                degrees = 180;\n              } else if (orientation === 8) {\n                console.log('rotate 180degree');\n                degrees = 270;\n              }\n              let newSize = newCanvasSize(oriWidth, oriHeight, degrees);\n              canvas.width = newSize[0];\n              canvas.height = newSize[1];\n              let ctx = canvas.getContext(\"2d\");\n              ctx.clearRect(0, 0, canvas.width, canvas.height);\n              ctx.save();\n              ctx.translate(canvas.width/2, canvas.height/2);\n              ctx.rotate(degrees*Math.PI/180);\n              ctx.drawImage(image, -oriWidth/2, -oriHeight/2, oriWidth, oriHeight);\n              ctx.restore();\n\n              /* Update img src with data url */\n              let imgDataUrl = canvas.toDataURL('image/jpeg');\n              document.getElementById('user-img').setAttribute('src', imgDataUrl);\n              //document.getElementById('user-img-modal').setAttribute('src', imgDataUrl);\n            })\n        }\n     }\n  }\n\n  onImgLoad = (e) => {\n\n    /* Image size should be:          */\n    /* width is cover-img.width       */\n    /* height is 3/5 cover-img.height */\n\n    let coverSize   = getImgSize('.cover-img')\n    let coverWidth  = coverSize.width\n    let coverHeight = coverSize.height\n    let coverRatio  = coverWidth*1.0/coverHeight\n\n    let imageSize   = getImgSize('.user-img')\n    let imageWidth  = imageSize.width\n    let imageHeight = imageSize.height\n    let imageRatio  = imageWidth*1.0/imageHeight\n\n    if (coverRatio > imageRatio) {\n      /* Image is tall and slim */\n      imageWidth = coverWidth\n      imageHeight = coverWidth*1.0/imageRatio\n    } else {\n      /* Image is short and flat */\n      imageHeight = coverHeight*5.0/7\n      imageWidth = imageRatio*imageHeight\n    }\n\n    let draggableX = (getImgSize('.drag-area').width - imageWidth)/2.0\n    let draggableY = (getImgSize('.drag-area').height - coverHeight)/2.0 + coverHeight*2/7.0\n\n    $('.user-img').css( \"maxWidth\", imageWidth + \"px\" )\n    $('.user-img').css( \"maxHeight\", imageHeight + \"px\" )\n\n    this.setState({\n      draggablePostion:\n        {\n          x: draggableX,\n          y: draggableY,\n        },\n      userImgSize:\n        {\n          w: imageWidth,\n          h: imageHeight,\n        }\n    })\n  }\n\n  onResize = (number) => {\n    const { userImgSize } = this.state\n\n    $('.user-img').css( \"maxWidth\", userImgSize.w + userImgSize.w*(number - 50)/100.0 + \"px\" )\n    $('.user-img').css( \"maxHeight\", userImgSize.h + userImgSize.h*(number - 50)/100.0 + \"px\" )\n\n    this.setState({ sliderValue: number })\n  }\n\n  onStart = () => {\n    const { activeDrags } = this.state\n    this.setState({\n      activeDrags: activeDrags + 1,\n      draggablePostion: null,\n    });\n\n  }\n\n  onStop = () => {\n    const { activeDrags } = this.state\n    this.setState({activeDrags: activeDrags - 1});\n  }\n\n  download = () => {\n\n    ReactGA.event({\n      category: 'User',\n      action: 'Download'\n    });\n\n    let scale = 15\n\n    let coverImg = $('.cover-img')\n    let userImg  = $('.user-img')\n\n    let coverImage = new Image();\n    coverImage.src = coverImg.attr('src');\n\n    let userImage = new Image();\n    userImage.src = userImg.attr('src');\n\n    let resize_canvas = document.getElementById(\"result\");\n    resize_canvas.width = coverImg.width()*scale;\n    resize_canvas.height = coverImg.height()*scale;\n\n    let ctx = resize_canvas.getContext(\"2d\");\n    ctx.rect(0, 0, coverImg.width()*scale, coverImg.height()*scale);\n    ctx.fillStyle = \"#CCCCCC\";\n    ctx.fill();\n    ctx.drawImage(userImage, userImg.offset().left*scale - coverImg.offset().left*scale, userImg.offset().top*scale - coverImg.offset().top*scale, userImg.width()*scale, userImg.height()*scale);\n    ctx.drawImage(coverImage, 0, 0, coverImg.width()*scale, coverImg.height()*scale);\n\n    // const base64 = resize_canvas.toDataURL(\"image/png\");\n    // const link = document.createElement('a');\n    // link.href = base64\n    // link.setAttribute('download', 'wuo.png');\n\n    // console.log('download:',base64)\n\n    // document.body.appendChild(link);\n    // link.click();\n    const link = document.createElement('a');\n    resize_canvas.toBlob((blob) => {\n      link.href = URL.createObjectURL(blob);\n      link.setAttribute('download', 'wuo.png');\n\n      document.body.appendChild(link);\n      link.click();\n    })\n\n    //let u = base64;\n    //let t='img'\n    //window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer','toolbar=0,status=0,width=626,height=436');\n  }\n\n  componentDidMount() {\n    Modal.setAppElement('body');\n\n    let drag = document.getElementById('drag-area');\n\n    drag.addEventListener(\"touchmove\", this.onTouchMove, false);\n  }\n\n  componentWillUnmount(){\n    let drag = document.getElementById('drag-area');\n\n    drag.removeEventListener(\"touchmove\", this.onTouchMove, false);\n  }\n\n  onTouchMove = (e) => {\n    e.preventDefault()\n  }\n\n  render() {\n    const dragHandlers = {onStart: this.onStart, onStop: this.onStop};\n    const { draggablePostion, sliderValue } = this.state\n\n    return (\n      <div className=\"cover-editor\">\n        <div className=\"upload\">\n          <label>\n            <div className=\"upload-button\">上傳照片</div>\n            <input type=\"file\" id=\"getval\" accept=\"image/*;capture=camera\" onChange={this.onUpload}/>\n          </label>\n        </div>\n        <div className=\"cover-box\">\n          <img\n              className=\"cover-img\"\n              draggable=\"true\"\n              src={`${imgPath}object/1.png`}\n              alt={'img'}/>\n          <div className=\"drag-area\" id=\"drag-area\">\n            <Draggable\n              bounds=\"parent\"\n              handle=\".user-img\"\n              position={draggablePostion}\n              {...dragHandlers} >\n              <div className=\"user-img-wrapper\">\n                <img\n                  id=\"user-img\"\n                  className=\"user-img\"\n                  draggable=\"false\"\n                  src={`${imgPath}wuo_sample.png`}\n                  alt={'img'}\n                  onLoad={this.onImgLoad}\n                  /*onClick={this.openModal}*//>\n              </div>\n            </Draggable>\n          </div>\n        </div>\n        <div className=\"slider\">\n          <Slider min={0} max={100} defaultValue={defaultSliderValue} value={sliderValue} onChange={this.onResize}/>\n          <div className=\"slider-minus\">-</div>\n          <div className=\"slider-plus\">+</div>\n        </div>\n        <div className=\"actions\">\n          <div className=\"visit\">\n            <a\n              target='_blank'\n              rel='noopener noreferrer'\n              href={'https://wuo-wuo.com/nest-holding-newspaper/each-period-of-nest-reported/800-wo-bao-bao-vol-14-quot-cat-is-hungry-quot-cat-diet-special-issue.html'}\n              className=\"visit-button\"\n              onClick={() => {\n                ReactGA.event({\n                  category: 'User',\n                  action: 'Visit Wuo shop'\n                });\n              }}></a>\n          </div>\n          <div className=\"download\">\n            <div className=\"download-button\" onClick={this.download}></div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React, { Component } from 'react';\n\nimport CoverEditorComponent from './CoverEditorComponent'\nimport './App.css';\n\n\nclass App extends Component {\n\n  render() {\n    return (\n      <div className=\"app\">\n        <canvas id=\"result\" className=\"hide\"></canvas>\n        <div hidden className=\"app-logo\"></div>\n        <div className=\"app-title\">\n          <img src=\"images/complete-title.png\" alt=\"\" className=\"app-main-title\"/>\n        </div>\n        <CoverEditorComponent/>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport ReactGA from 'react-ga';\n\nReactGA.initialize('UA-129780457-1');\nReactGA.pageview(window.location.pathname + window.location.search);\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}